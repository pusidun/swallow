language: cpp
dist: bionic
compiler: gcc
sudo: true

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
    packages:
      - g++-6 

services:
  - redis-server

before_install:
  - wget https://github.com/google/googletest/archive/release-1.10.0.tar.gz
  - tar zxvf release-1.10.0.tar.gz

install:
  - cd googletest-release-1.10.0 && cmake . && make && sudo make install
  - pwd
  - cd ..

script:
  - CXX=/usr/bin/g++-6 CC=/usr/bin/gcc-6
  - mkdir build && cd build && cmake .. && make
  - cd .. && ls && bash test.sh